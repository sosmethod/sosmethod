{
    "rules": {
        "users": {
            "$uid": {
                ".read": "$uid === auth.uid || auth.token.email.toLowerCase() === data.child('username').val() || $uid === auth.token.email.toLowerCase().replace('.', '_').replace('$', '_').replace('/', '_').replace('#', '_').replace('[', '_').replace(']', '_')",
                ".write": "$uid === auth.uid || auth.token.email.toLowerCase() === data.child('username').val() || $uid === auth.token.email.toLowerCase().replace('.', '_').replace('$', '_').replace('/', '_').replace('#', '_').replace('[', '_').replace(']', '_')"
            }
        },
        "roles": {
            "$role": {
                "$uid": {
                    ".read": "$uid === auth.token.email.toLowerCase().replace('.', '_').replace('$', '_').replace('/', '_').replace('#', '_').replace('[', '_').replace(']', '_')"
                }
            },
            ".write": "false"
        },
        "groups": {
            "$role": {
                "$uid": {
                    ".read": "$uid === auth.token.email.toLowerCase().replace('.', '_').replace('$', '_').replace('/', '_').replace('#', '_').replace('[', '_').replace(']', '_')"
                }
            },
            ".write": "false"
        },
        "surveys": {
            "$uid": {
                ".read": "$uid.contains('_anonymous') || $uid.contains(auth.token.email.toLowerCase().replace('.', '_').replace('$', '_').replace('/', '_').replace('#', '_').replace('[', '_').replace(']', '_'))",
                ".write": "$uid.contains('_anonymous') || $uid.contains(auth.token.email.toLowerCase().replace('.', '_').replace('$', '_').replace('/', '_').replace('#', '_').replace('[', '_').replace(']', '_'))"
            }
        }
    }
}
